<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SAMD21_HINK-E0154A05__4_1_3: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Doxygen_Ineltek_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SAMD21_HINK-E0154A05__4_1_3
   &#160;<span id="projectnumber">1.3</span>
   </div>
   <div id="projectbrief">Eink Xplained Pro Example Code - SAMD21 - HINK-E0154A05 - ASF4</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SAMD21_HINK-E0154A05__4_1_3 Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro"></a>
Introduction</h1>
<p>This example code demonstrates the use of the Eink Xplained Pro (HINK-E0154A05) with the SAMD21 Xplained Pro board, making use of Ineltek's Eink ASF4 Software Library (version 1.3).<br />
 It uses the following hardware:</p><ul>
<li>the SAMD21 Xplained Pro.</li>
<li>the Eink Xplained Extension (HINK-E0154A05) on EXT1 and EXT2.</li>
</ul>
<h1><a class="anchor" id="setup_steps"></a>
Setup Steps</h1>
<h2><a class="anchor" id="setup_prerequisites"></a>
Prerequisites</h2>
<p>In order to use the Eink ASF4 Software Library, several software components must be added from the Atmel START. These are:</p><ul>
<li>Delay (driver)</li>
<li>PORT (driver)</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>Note that this library is not compatible with the ASF Wizard in Atmel Studio - for this you must use the Eink ASF3 Software Library - no longer in development.</dd></dl>
<h2><a class="anchor" id="setup_pins"></a>
Pinmux Configuration</h2>
<p>Next we need to define the pins for the display and ensure they are labeled correctly within Atmel START. Pin directions are automatically configured by the library, so any direction can be set within START. The following pins are required with the following labels:</p><ul>
<li><b>EINK_DC</b> : Data/Command pin - <em>EXT1 Pin 3</em></li>
<li><b>EINK_BS</b> : BS pin - <em>EXT1 Pin 5</em></li>
<li><b>EINK_BUSY</b> : Busy pin - <em>EXT1 Pin 6</em></li>
<li><b>EINK_CSB</b> : Chip Select pin - <em>EXT1 Pin 15</em></li>
<li><b>EINK_RST</b> : Reset pin - <em>EXT1 Pin 16</em></li>
<li><b>EINK_SPI_SDA</b> : Data pin - <em>EXT1 Pin 17</em></li>
<li><b>EINK_SPI_SCL</b> : Clock pin - <em>EXT1 Pin 18</em></li>
</ul>
<p>We can also add the LEDs and Buttons on the Eink Xplained Pro board:</p><ul>
<li><b>EINK_X_LED_0_PIN</b> : LED 1 - <em>EXT1 Pin 8</em></li>
<li><b>EINK_X_LED_1_PIN</b> : LED 2 - <em>EXT1 Pin 10</em></li>
<li><b>EINK_X_LED_2_PIN</b> : LED 3 - <em>EXT1 Pin 14</em></li>
<li><b>EINK_X_BUTTON_0_PIN</b> : Button 1 - <em>EXT1 Pin 7</em></li>
<li><b>EINK_X_BUTTON_1_PIN</b> : Button 2 - <em>EXT1 Pin 9</em></li>
<li><b>EINK_X_BUTTON_2_PIN</b> : Button 3 - <em>EXT1 Pin 13</em></li>
</ul>
<h2><a class="anchor" id="setup_project"></a>
Atmel Studio Project Configuration</h2>
<p>Once your Atmel Studio project has been generated from Atmel START, we now need to add the library to the compiler include paths:<br />
 See Project Properties &gt; Toolchain &gt; ARM/GNU C Compiler &gt; Directories:</p><ul>
<li>&lt;BASE_DIR&gt;/eink_asf4_1_3</li>
<li>&lt;BASE_DIR&gt;/eink_asf4_1_3/fonts</li>
</ul>
<p>Finally the following line must be added directly below the Atmel START include statement: </p><div class="fragment"><div class="line"><span class="preprocessor">#define eink_project_excluded</span></div><div class="line"><span class="preprocessor">#include &lt;atmel_start.h&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="eink__asf4__1__3_8h.html">eink_asf4_1_3.h</a>&gt;</span></div></div><!-- fragment --><p>In this example project, the library is located elsewhere and not in the Solution Explorer, hence why this has been included.</p>
<p>To initialize the Eink library for use with the HINK-E0154A05 (SSD1608), the <a class="el" href="hink__e0154a05_8c.html#a6702d7e30db8f5787d5e63f3dc127c21" title="Initialize SSD1608 controller and Eink display. It will also write the display buffer to all zeros...">eink_hink_e0154a05_init()</a> function must be called. <a class="el" href="structssd1608__config.html">ssd1608_config</a> must be used as the configuration struct. Note that <a class="el" href="ssd1608_8h.html#a0f64c15b1971da138cda221a3237de8b" title="Initializes UC8151 configuration structure to defaults. ">ssd1608_get_config_defaults()</a> should be called before making any required changes and passing them to the initialization function.</p>
<p>Example Code:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span><a class="code" href="structssd1608__config.html">ssd1608_config</a> eink_conf;</div><div class="line"></div><div class="line"><a class="code" href="ssd1608_8h.html#a0f64c15b1971da138cda221a3237de8b">ssd1608_get_config_defaults</a>(&amp;eink_conf);</div><div class="line">eink_conf.display_rotation = ROTATE_0;</div><div class="line"><a class="code" href="hink__e0154a05_8c.html#a6702d7e30db8f5787d5e63f3dc127c21">eink_hink_e0154a05_init</a>(&amp;eink_conf, <span class="keyword">false</span>);</div></div><!-- fragment --><h1><a class="anchor" id="gfx_library"></a>
GFX Library</h1>
<p>Once initialized, the library stores a buffer in RAM in order keep track of the canvas - initially it is all white. There are several primitive function that allow for some data to be written to the canvas:</p><ul>
<li><a class="el" href="eink__gfx__graphics_8c.html#a237cb01f4cf367b9cbec7daf0b63ca0d" title="Fill display buffers with a single color. ">gfx_eink_graphics_fill_screen()</a></li>
<li><a class="el" href="eink__gfx_8h.html#aee89fc7075cedd7cb59b4e041d9c7a6a" title="Load Mono Image function. ">gfx_eink_load_mono_image()</a></li>
<li><a class="el" href="eink__gfx__graphics_8c.html#a216008c06c6df2eeb241adc13ecb2ead" title="Add a line to the display buffer from (x0,y0) to (x1,y1). ">gfx_eink_graphics_draw_line()</a></li>
<li><a class="el" href="eink__gfx__graphics_8c.html#a8e1288a3acf93b67f21f028965defb69" title="Add a rectangle to the display buffer starting at (x0,y0) with set width and height. ">gfx_eink_graphics_draw_rect()</a></li>
<li><a class="el" href="eink__gfx__text_8c.html#a7fc02e22d849603c096eaa1abcdeef64" title="Write a string of data starting at (x,y) ">gfx_eink_text_write_string()</a></li>
<li><a class="el" href="eink__gfx_8h.html#a635c8fabf08032e25e6d36f2c86fde41" title="Set Pixel function. ">gfx_eink_set_pixel()</a></li>
</ul>
<p>The canvas buffer can be uploaded to the display controller with the use of <a class="el" href="eink__gfx_8h.html#a910f87d8ecfa86c35a4ce27337d77ba5" title="Put Display Buffer function. ">gfx_eink_put_display_buffer()</a></p>
<p>If you decide to load the buffer but refresh the display later on, this can be achieved using the <a class="el" href="eink__gfx_8h.html#af14e568ac5eb5e1e05e56247be8bd4d1" title="Refresh Display Buffer function. ">gfx_eink_refresh_display_buffer()</a></p>
<h1><a class="anchor" id="files"></a>
Main Files</h1>
<ul>
<li><a class="el" href="main_8c.html" title="Eink Xplained Pro Demo - SAMD21 - HINK-E0154A05. ">main.c</a> : Initialize the Eink display and displays some demo screens.</li>
</ul>
<h1><a class="anchor" id="usage"></a>
Usage</h1>
<ol type="1">
<li>Build the program and download it into the board.</li>
<li>Wait for the RED LED to turn off - indicates initialization is complete.</li>
<li>Press one of the 3 buttons on the Eink Xplained Extension to change the display.</li>
</ol>
<h1><a class="anchor" id="compinfo"></a>
Compilation Information</h1>
<p>This software was written for the GNU GCC compiler using Atmel Studio 7.0 and requires ASF version 4 (originally compiled from Atmel START version 1.5.1877). Other compilers may or may not work.</p>
<h1><a class="anchor" id="contactinfo"></a>
Contact Information</h1>
<p>For further information, visit <a href="http://www.ineltek.com">Ineltek</a>.<br />
</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
